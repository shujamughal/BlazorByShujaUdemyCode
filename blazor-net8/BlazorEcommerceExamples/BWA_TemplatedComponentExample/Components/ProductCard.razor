@using Models

<div class="card @CardClass">
    <img src="@Product.ImageUrl" class="card-img-top" alt="@Product.Name" />
    <div class="card-body">
        @if (Template != null)
        {
            <div>@Template(Product)</div> <!-- Render the custom template -->
        }
        else
        {
            <h5 class="card-title">@Product.Name</h5>
            <p class="card-text">@Product.Description</p>
            <p class="card-text"><strong>Price:</strong> @Product.Price.ToString("C")</p>
        }
        <button class="btn btn-primary" @onclick="OnAddToCartClicked">Add to Cart</button>
    </div>
</div>

@code {
    [Parameter]
    public Product Product { get; set; }

    [Parameter]
    public EventCallback<Product> OnAddToCart { get; set; }

    [Parameter]
    public RenderFragment<Product> Template { get; set; } // Templated content

    public string CardClass { get; set; } = string.Empty;

    private async Task OnAddToCartClicked()
    {
        await OnAddToCart.InvokeAsync(Product);
    }

    public void HighlightCard()
    {
        CardClass = "highlight";
        StateHasChanged();
    }

    public void RemoveHighlight()
    {
        CardClass = string.Empty;
        StateHasChanged();
    }
}
