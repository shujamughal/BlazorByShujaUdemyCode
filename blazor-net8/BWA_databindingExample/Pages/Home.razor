@page "/"
@using BWA_databindingExample.Models

<h3>Shopping Cart</h3>

<ProductList OnProductAdded="AddProductToCart"></ProductList>

<CartSummary CartProducts="CartProducts"></CartSummary>

@code {
    private List<Product> CartProducts { get; set; } = new List<Product>();

    private void AddProductToCart(Product product)
    {
        var existingProduct = CartProducts.FirstOrDefault(p => p.Id == product.Id);
        if (existingProduct != null)
        {
            existingProduct.Quantity += product.Quantity;
        }
        else
        {
            CartProducts.Add(new Product
                {
                    Id = product.Id,
                    Name = product.Name,
                    Price = product.Price,
                    Quantity = product.Quantity
                });
        }
    }
}
